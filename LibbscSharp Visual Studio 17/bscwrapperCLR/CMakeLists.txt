cmake_minimum_required(VERSION 3.15)

project(bscwrapperCLR LANGUAGES CXX)

# ‚úÖ Forcer le mode Release par d√©faut
if(NOT CMAKE_BUILD_TYPE)
  set(CMAKE_BUILD_TYPE Release)
endif()

# üõ†Ô∏è Sp√©cifier le type de biblioth√®que
add_library(bscwrapperCLR SHARED bscwrapperCLR.cpp)

# ‚úÖ Activer le support C++/CLI (/clr) avec MSVC
if(MSVC)
  set_property(TARGET bscwrapperCLR PROPERTY COMMON_LANGUAGE_RUNTIME "/clr")
  set_target_properties(bscwrapperCLR PROPERTIES
    CXX_STANDARD 17
    CXX_STANDARD_REQUIRED YES
  )
endif()

# üìö Ajouter le r√©pertoire des headers si besoin
target_include_directories(bscwrapperCLR PRIVATE ${PROJECT_SOURCE_DIR})

# üì¶ Lier la biblioth√®que libbsc.lib
target_link_directories(bscwrapperCLR PRIVATE ${PROJECT_SOURCE_DIR}/libs)
target_link_libraries(bscwrapperCLR PRIVATE libbsc)

# ‚ú® D√©finir l'export en tant que DLL .NET interop√©rable
set_target_properties(bscwrapperCLR PROPERTIES
  WINDOWS_EXPORT_ALL_SYMBOLS TRUE
)